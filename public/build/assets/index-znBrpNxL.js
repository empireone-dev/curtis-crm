import{E,N as ne,p as oe,k as re,b as le,n as F,C as z,u as se,M as ce,a as M,O as ae,l as ie}from"./asyncToGenerator-c5WsSbRn.js";import{r,R as S}from"./page-DVVVTcK8.js";import{u as ue,r as fe}from"./render-BRlc8Cs-.js";import{R as me}from"./CheckCircleFilled-Bqw-tjCA.js";import{a as de}from"./pickAttrs-9XeDcI0h.js";import{a as Ce,R as ge}from"./InfoCircleFilled-CPOxogNa.js";import{C as pe}from"./useZIndex-6gEWSy-s.js";import{g as B}from"./motion-4S5rSXvC.js";import{B as ve,a as be}from"./button-DkbuceU6.js";import{a as H,b as xe,M as W,F as ye,r as Oe}from"./Modal-rs1HwPza.js";import{p as he,a as Pe,u as $e,P as Ee}from"./index-CU412VwI.js";import{u as _}from"./useLocale-DWkRg3Vy.js";import{w as je}from"./PurePanel-CT9Ru5XO.js";import{u as Te}from"./useCSSVarCls-CiTpdV9Y.js";function Se(){const[e,n]=r.useState([]),l=r.useCallback(t=>(n(o=>[].concat(E(o),[t])),()=>{n(o=>o.filter(a=>a!==t))}),[]);return[e,l]}function R(e){return!!(e!=null&&e.then)}const V=e=>{const{type:n,children:l,prefixCls:t,buttonProps:o,close:a,autoFocus:g,emitEvent:u,isSilent:c,quitOnNullishReturnValue:m,actionFn:s}=e,f=r.useRef(!1),p=r.useRef(null),[v,y]=ne(!1),d=function(){a==null||a.apply(void 0,arguments)};r.useEffect(()=>{let i=null;return g&&(i=setTimeout(()=>{var x;(x=p.current)===null||x===void 0||x.focus()})),()=>{i&&clearTimeout(i)}},[]);const b=i=>{R(i)&&(y(!0),i.then(function(){y(!1,!0),d.apply(void 0,arguments),f.current=!1},x=>{if(y(!1,!0),f.current=!1,!(c!=null&&c()))return Promise.reject(x)}))},C=i=>{if(f.current)return;if(f.current=!0,!s){d();return}let x;if(u){if(x=s(i),m&&!R(x)){f.current=!1,d(i);return}}else if(s.length)x=s(a),f.current=!1;else if(x=s(),!R(x)){d();return}b(x)};return r.createElement(ve,Object.assign({},be(n),{onClick:C,loading:v,prefixCls:t},o,{ref:p}),l)},k=()=>{const{autoFocusButton:e,cancelButtonProps:n,cancelTextLocale:l,isSilent:t,mergedOkCancel:o,rootPrefixCls:a,close:g,onCancel:u,onConfirm:c}=r.useContext(H);return o?S.createElement(V,{isSilent:t,actionFn:u,close:function(){g==null||g.apply(void 0,arguments),c==null||c(!1)},autoFocus:e==="cancel",buttonProps:n,prefixCls:`${a}-btn`},l):null},A=()=>{const{autoFocusButton:e,close:n,isSilent:l,okButtonProps:t,rootPrefixCls:o,okTextLocale:a,okType:g,onConfirm:u,onOk:c}=r.useContext(H);return S.createElement(V,{isSilent:l,type:g||"primary",actionFn:c,close:function(){n==null||n.apply(void 0,arguments),u==null||u(!0)},autoFocus:e==="ok",buttonProps:t,prefixCls:`${o}-btn`},a)},we=e=>{const{componentCls:n,titleFontSize:l,titleLineHeight:t,modalConfirmIconSize:o,fontSize:a,lineHeight:g,modalTitleHeight:u,fontHeight:c,confirmBodyPadding:m}=e,s=`${n}-confirm`;return{[s]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${s}-body-wrapper`]:Object.assign({},re()),[`&${n} ${n}-body`]:{padding:m},[`${s}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(c).sub(o).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(u).sub(o).equal()).div(2).equal()}},[`${s}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS},[`${e.iconCls} + ${s}-paragraph`]:{maxWidth:`calc(100% - ${le(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${s}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:l,lineHeight:t},[`${s}-content`]:{color:e.colorText,fontSize:a,lineHeight:g},[`${s}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${s}-error ${s}-body > ${e.iconCls}`]:{color:e.colorError},[`${s}-warning ${s}-body > ${e.iconCls},
        ${s}-confirm ${s}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${s}-info ${s}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${s}-success ${s}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},Ie=oe(["Modal","confirm"],e=>{const n=Pe(e);return[we(n)]},he,{order:-1e3});var Fe=function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};function q(e){const{prefixCls:n,icon:l,okText:t,cancelText:o,confirmPrefixCls:a,type:g,okCancel:u,footer:c,locale:m}=e,s=Fe(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let f=l;if(!l&&l!==null)switch(g){case"info":f=r.createElement(ge,null);break;case"success":f=r.createElement(me,null);break;case"error":f=r.createElement(de,null);break;default:f=r.createElement(Ce,null)}const p=u??g==="confirm",v=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[y]=_("Modal"),d=m||y,b=t||(p?d==null?void 0:d.okText:d==null?void 0:d.justOkText),C=o||(d==null?void 0:d.cancelText),i=Object.assign({autoFocusButton:v,cancelTextLocale:C,okTextLocale:b,mergedOkCancel:p},s),x=r.useMemo(()=>i,E(Object.values(i))),O=r.createElement(r.Fragment,null,r.createElement(k,null),r.createElement(A,null)),P=e.title!==void 0&&e.title!==null,j=`${a}-body`;return r.createElement("div",{className:`${a}-body-wrapper`},r.createElement("div",{className:F(j,{[`${j}-has-title`]:P})},f,r.createElement("div",{className:`${a}-paragraph`},P&&r.createElement("span",{className:`${a}-title`},e.title),r.createElement("div",{className:`${a}-content`},e.content))),c===void 0||typeof c=="function"?r.createElement(xe,{value:x},r.createElement("div",{className:`${a}-btns`},typeof c=="function"?c(O,{OkBtn:A,CancelBtn:k}):O)):c,r.createElement(Ie,{prefixCls:n}))}const Re=e=>{const{close:n,zIndex:l,afterClose:t,open:o,keyboard:a,centered:g,getContainer:u,maskStyle:c,direction:m,prefixCls:s,wrapClassName:f,rootPrefixCls:p,bodyStyle:v,closable:y=!1,closeIcon:d,modalRender:b,focusTriggerAfterClose:C,onConfirm:i,styles:x}=e,O=`${s}-confirm`,P=e.width||416,j=e.style||{},I=e.mask===void 0?!0:e.mask,T=e.maskClosable===void 0?!1:e.maskClosable,ee=F(O,`${O}-${e.type}`,{[`${O}-rtl`]:m==="rtl"},e.className),[,N]=se(),te=r.useMemo(()=>l!==void 0?l:N.zIndexPopupBase+pe,[l,N]);return r.createElement(W,{prefixCls:s,className:ee,wrapClassName:F({[`${O}-centered`]:!!e.centered},f),onCancel:()=>{n==null||n({triggerCancel:!0}),i==null||i(!1)},open:o,title:"",footer:null,transitionName:B(p||"","zoom",e.transitionName),maskTransitionName:B(p||"","fade",e.maskTransitionName),mask:I,maskClosable:T,style:j,styles:Object.assign({body:v,mask:c},x),width:P,zIndex:te,afterClose:t,keyboard:a,centered:g,getContainer:u,closable:y,closeIcon:d,modalRender:b,focusTriggerAfterClose:C},r.createElement(q,Object.assign({},e,{confirmPrefixCls:O})))},D=e=>{const{rootPrefixCls:n,iconPrefixCls:l,direction:t,theme:o}=e;return r.createElement(z,{prefixCls:n,iconPrefixCls:l,direction:t,theme:o},r.createElement(Re,Object.assign({},e)))},$=[];let Q="";function G(){return Q}const Me=e=>{var n,l;const{prefixCls:t,getContainer:o,direction:a}=e,g=ae(),u=r.useContext(M),c=G()||u.getPrefixCls(),m=t||`${c}-modal`;let s=o;return s===!1&&(s=void 0),S.createElement(D,Object.assign({},e,{rootPrefixCls:c,prefixCls:m,iconPrefixCls:u.iconPrefixCls,theme:u.theme,direction:a??u.direction,locale:(l=(n=u.locale)===null||n===void 0?void 0:n.Modal)!==null&&l!==void 0?l:g,getContainer:s}))};function w(e){const n=ce(),l=document.createDocumentFragment();let t=Object.assign(Object.assign({},e),{close:u,open:!0}),o;function a(){for(var m,s=arguments.length,f=new Array(s),p=0;p<s;p++)f[p]=arguments[p];if(f.some(d=>d==null?void 0:d.triggerCancel)){var y;(m=e.onCancel)===null||m===void 0||(y=m).call.apply(y,[e,()=>{}].concat(E(f.slice(1))))}for(let d=0;d<$.length;d++)if($[d]===u){$.splice(d,1);break}ue(l)}function g(m){clearTimeout(o),o=setTimeout(()=>{const s=n.getPrefixCls(void 0,G()),f=n.getIconPrefixCls(),p=n.getTheme(),v=S.createElement(Me,Object.assign({},m));fe(S.createElement(z,{prefixCls:s,iconPrefixCls:f,theme:p},n.holderRender?n.holderRender(v):v),l)})}function u(){for(var m=arguments.length,s=new Array(m),f=0;f<m;f++)s[f]=arguments[f];t=Object.assign(Object.assign({},t),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),a.apply(this,s)}}),t.visible&&delete t.visible,g(t)}function c(m){typeof m=="function"?t=m(t):t=Object.assign(Object.assign({},t),m),g(t)}return g(t),$.push(u),{destroy:u,update:c}}function X(e){return Object.assign(Object.assign({},e),{type:"warning"})}function Y(e){return Object.assign(Object.assign({},e),{type:"info"})}function Z(e){return Object.assign(Object.assign({},e),{type:"success"})}function J(e){return Object.assign(Object.assign({},e),{type:"error"})}function K(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Ne(e){let{rootPrefixCls:n}=e;Q=n}var Be=function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};const ke=(e,n)=>{var l,{afterClose:t,config:o}=e,a=Be(e,["afterClose","config"]);const[g,u]=r.useState(!0),[c,m]=r.useState(o),{direction:s,getPrefixCls:f}=r.useContext(M),p=f("modal"),v=f(),y=()=>{var i;t(),(i=c.afterClose)===null||i===void 0||i.call(c)},d=function(){var i;u(!1);for(var x=arguments.length,O=new Array(x),P=0;P<x;P++)O[P]=arguments[P];if(O.some(T=>T==null?void 0:T.triggerCancel)){var I;(i=c.onCancel)===null||i===void 0||(I=i).call.apply(I,[c,()=>{}].concat(E(O.slice(1))))}};r.useImperativeHandle(n,()=>({destroy:d,update:i=>{m(x=>Object.assign(Object.assign({},x),i))}}));const b=(l=c.okCancel)!==null&&l!==void 0?l:c.type==="confirm",[C]=_("Modal",ie.Modal);return r.createElement(D,Object.assign({prefixCls:p,rootPrefixCls:v},c,{close:d,open:g,afterClose:y,okText:c.okText||(b?C==null?void 0:C.okText:C==null?void 0:C.justOkText),direction:c.direction||s,cancelText:c.cancelText||(C==null?void 0:C.cancelText)},a))},Ae=r.forwardRef(ke);let L=0;const Le=r.memo(r.forwardRef((e,n)=>{const[l,t]=Se();return r.useImperativeHandle(n,()=>({patchElement:t}),[]),r.createElement(r.Fragment,null,l)}));function ze(){const e=r.useRef(null),[n,l]=r.useState([]);r.useEffect(()=>{n.length&&(E(n).forEach(g=>{g()}),l([]))},[n]);const t=r.useCallback(a=>function(u){var c;L+=1;const m=r.createRef();let s;const f=new Promise(b=>{s=b});let p=!1,v;const y=r.createElement(Ae,{key:`modal-${L}`,config:a(u),ref:m,afterClose:()=>{v==null||v()},isSilent:()=>p,onConfirm:b=>{s(b)}});return v=(c=e.current)===null||c===void 0?void 0:c.patchElement(y),v&&$.push(v),{destroy:()=>{function b(){var C;(C=m.current)===null||C===void 0||C.destroy()}m.current?b():l(C=>[].concat(E(C),[b]))},update:b=>{function C(){var i;(i=m.current)===null||i===void 0||i.update(b)}m.current?C():l(i=>[].concat(E(i),[C]))},then:b=>(p=!0,f.then(b))}},[]);return[r.useMemo(()=>({info:t(Y),success:t(Z),error:t(J),warning:t(X),confirm:t(K)}),[]),r.createElement(Le,{key:"modal-holder",ref:e})]}var He=function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};const We=e=>{const{prefixCls:n,className:l,closeIcon:t,closable:o,type:a,title:g,children:u,footer:c}=e,m=He(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:s}=r.useContext(M),f=s(),p=n||s("modal"),v=Te(f),[y,d,b]=$e(p,v),C=`${p}-confirm`;let i={};return a?i={closable:o??!1,title:"",footer:"",children:r.createElement(q,Object.assign({},e,{prefixCls:p,confirmPrefixCls:C,rootPrefixCls:f,content:u}))}:i={closable:o??!0,title:g,footer:c!==null&&r.createElement(ye,Object.assign({},e)),children:u},y(r.createElement(Ee,Object.assign({prefixCls:p,className:F(d,`${p}-pure-panel`,a&&C,a&&`${C}-${a}`,l,b,v)},m,{closeIcon:Oe(p,t),closable:o},i)))},_e=je(We);function U(e){return w(X(e))}const h=W;h.useModal=ze;h.info=function(n){return w(Y(n))};h.success=function(n){return w(Z(n))};h.error=function(n){return w(J(n))};h.warning=U;h.warn=U;h.confirm=function(n){return w(K(n))};h.destroyAll=function(){for(;$.length;){const n=$.pop();n&&n()}};h.config=Ne;h._InternalPanelDoNotUseOrYouWillBeFired=_e;export{h as M};
