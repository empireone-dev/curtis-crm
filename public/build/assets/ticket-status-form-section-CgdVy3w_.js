import{r as l,j as t,s as h,y as u,z as g}from"./page-3qddC-Ic.js";import{S as w}from"./select-B1gdv0xu.js";import{T as b}from"./textarea-D6aWmgKz.js";import{u as c,a as C}from"./app-CQN6L9D2.js";import{u as k}from"./tickets-thunk-B4BKyHbu.js";import{r as m}from"./routing-BzgBYGmF.js";import{n as y}from"./tickets-service-BYEPOVyf.js";import"./index-rStzQJdP.js";import"./activities-service-BaJCmKbj.js";import"./internals-service-B9kSbxh_.js";function D(){const[s,d]=l.useState({}),[N,r]=l.useState(!1),{ticket:o}=c(e=>e.tickets),{user:f}=c(e=>e.app),p=C();function n(e,a){d({...s,[a]:e})}const x=[{value:0,name:""},{value:1,name:"Callback Sucessful - Fixed"},{value:2,name:"Callback Sucessful - Not Fixed"},{value:3,name:"No Answer - End Call"},{value:4,name:"No Answer - Left Voicemail"},{value:5,name:"Email sent"},{value:6,name:"Closed resolved - agent resolution"},{value:7,name:"Closed resolved - customer resolution"},{value:8,name:"Closed for warranty"},{value:9,name:"Closed - parts issue"}];async function v(){if(confirm("Are you sure you want to close the ticket?")){r(!0);try{await h.dispatch(k(o.id,"CLOSED")),r(!1),u.visit(m("files"))}catch{r(!1)}}}async function i(e){try{const a=await y({...s,...o,user_id:f.id,where_to_move:e});p(g(a.result)),u.visit(m("files"))}catch{}}return t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsx(w,{onChange:n,name:"reason",value:(s==null?void 0:s.isHasEmail)??"",label:"Reason",errorMessage:"",data:x}),t.jsx(b,{required:!0,onChange:n,name:"notes",value:s.notes??" ",label:"Notes",type:"text",errorMessage:"Notes is required"}),t.jsxs("div",{className:"flex gap-5",children:[t.jsx("button",{onClick:()=>i("WARRANTY VALIDATION"),className:"p-3 bg-green-500 uppercase hover:bg-green-600 text-white rounded-md w-64 flex items-center justify-center",children:"Forwarded to Warranty"}),t.jsx("button",{onClick:()=>i("PARTS VALIDATION"),className:"p-3 bg-blue-500 uppercase hover:bg-blue-600 text-white rounded-md w-64 flex items-center justify-center",children:"Forwarded to Parts"}),t.jsx("button",{onClick:()=>v(),className:"p-3 bg-red-500 uppercase hover:bg-red-600 text-white rounded-md w-64 flex items-center justify-center",children:"CLOSE TICKET"})]})]})}export{D as default};
