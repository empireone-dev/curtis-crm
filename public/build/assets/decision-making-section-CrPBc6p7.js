import{r as o,j as t,C as U,y as u}from"./page-DdRUgAPm.js";import{I as i}from"./input-DEU2Nfgm.js";import{S as g}from"./select-DqEutgH0.js";import{g as T}from"./user-service-Bj2ACXQi.js";import{u as f,a as W}from"./app-QxpcjIeC.js";import{L as E}from"./loading-cC9aGlE7.js";import{g as $}from"./fedex-rate-service-C5N1557v.js";import{W as L}from"./wysiwyg-CmF7NlUM.js";import{g as O,s as H}from"./desicion-making-service-xTi5VJCv.js";import{r as x}from"./routing-BzgBYGmF.js";import{a as G}from"./product-search-IfNfm9Yt.js";import{s as b}from"./index-Bj-9xytT.js";import{F as K,a as X}from"./Squares2X2Icon-DKN6cKDU.js";import"./index-cYOT7JlB.js";import"./page-Bs2OuYoQ.js";import"./asyncToGenerator-BHyMBGJS.js";import"./render-CDdRFazO.js";import"./CheckCircleFilled-BC4CfrEt.js";import"./pickAttrs-CvfN6BGJ.js";import"./InfoCircleFilled-DqD8uBxJ.js";import"./KeyCode-DNlgD2sM.js";import"./useCSSVarCls-BVJMh7rG.js";import"./useZIndex-DWp3nWXN.js";const A=[{id:"q1",text:"Did the customer provide a complete receipt (DOP, Unit Price, Unit Description, Order summary with Total Breakdown, Name of store)?"},{id:"q2",text:"Did the customer already provide all necessary photos (front, back, model#, serial#, photo or video of the issue)?"},{id:"q3",text:"Is the unit within warranty?"},{id:"q4",text:"Did you check the serial number in InComm?"},{id:"q5",text:"Is it purchased from an Authorized retailer?"},{id:"q6",text:"Is the condition of the unit New? and Not Used, like new?"},{id:"q7",text:"Did the model#,serial#,description match from the unit and receipt?"}];function ge(){const{user:d}=f(s=>s.app),{asc:p,ticket:a}=f(s=>s.tickets),[e,n]=o.useState({}),k=W(),[y,_]=o.useState(!1),[h,j]=o.useState(!1),{email_templates:v}=f(s=>s.email_templates),[M,S]=b.useMessage(),[C,D]=o.useState({}),F=s=>{const{name:l,checked:c}=s.target;D(m=>({...m,[l]:c}))},N=A.every(s=>C[s.id]);o.useEffect(()=>{n({...e,cost_refund:e.retailers_price-e.discount,after_discount:e.retailers_price-e.discount})},[e.retailers_price,e.discount]),o.useEffect(()=>{async function s(l){var w,R;const c=await G(a),m=await O(a.id);m.status?n({...a,...m.status,id:a.id,user_id:d.id,emp_id:d.emp_id,...c}):n({...a,ticket_type:"REPLACEMENT",retailers_price:((w=a.receipt)==null?void 0:w.retailers_price)??"0",discount:((R=a.receipt)==null?void 0:R.discount)??"0",id:a.id,user_id:d.id,emp_id:d.emp_id,...c})}s()},[]);function r(s,l){l=="wysiwyg"?n({...e,template_text:s}):(s||s=="")&&l&&n({...e,[l]:s})}o.useEffect(()=>{async function s(){const l=await T(4);k(U(l.data))}s()},[]);async function P(){_(!0);try{const s=await $(e);n({...e,shipping_cost:`${parseFloat(s.rates.FEDEX_GROUND.PAYOR_ACCOUNT_PACKAGE).toFixed(2)}`,estimated_cost:`${(parseFloat(s.rates.FEDEX_GROUND.PAYOR_ACCOUNT_PACKAGE)+parseFloat(e.cost_of_unit??"0")).toFixed(2)}`})}catch{alert("No rates Found!")}_(!1)}function I(s){const l=v.find(c=>c.id==s);n({...e,template_text:l.template_text})}async function q(s){s.preventDefault(),(e.after_discount==null||e.after_discount==""||e.after_discount=="0")&&b.error("Price after discount is required!"),e.cost_refund==null||e.cost_refund==""||e.cost_refund=="0"?b.error("Estimated Cost of Refund is required!"):e.instruction?(j(!0),await H(e),e.instruction=="CA Warehouse"||e.instruction=="US Warehouse"?u.visit(x("warehouse")):e.instruction=="ASC"?u.visit(x("repair")):e.instruction=="Home"?u.visit(x("files")):e.instruction=="RMA Request"&&u.visit(x("rma_request")),j(!1)):M.open({type:"error",content:"Warranty Instruction is Required!"})}return t.jsxs("form",{onSubmit:q,children:[S,t.jsxs("section",{className:"container ",children:[t.jsxs("div",{className:"flex gap-3 mt-2 px-4",children:[t.jsxs("button",{type:"button",className:"flex items-center rounded-md mt-3 bg-white px-2.5 py-1.5 text-sm text-green-500 font-semibold shadow-sm ring-1 ring-inset ring-green-500 hover:bg-green-500 hover:text-gray-500",children:[t.jsx(K,{className:"h-5"}),t.jsx("span",{children:a.country})]}),t.jsxs("button",{type:"button",className:"flex items-center rounded-md mt-3 bg-white px-2.5 py-1.5 text-sm text-yellow-500 font-semibold shadow-sm ring-1 ring-inset ring-yellow-500 hover:bg-yellow-300 hover:text-gray-500",children:[t.jsx(X,{className:"h-5"}),t.jsx("span",{children:a.item_number})]})]}),t.jsx("div",{className:" my-5 mx-3",children:t.jsx("a",{href:"/administrator/google_map/"+a.id,target:"_blank",className:"p-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg",children:"OPEN ASC"})}),a.country=="CA"&&t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:" border-b border-gray-900/10 w-96",children:t.jsx("div",{className:"w-full flex justify-start px-4",children:t.jsx("div",{className:"flex items-start gap-x-3 mt-4 my-4 ",children:t.jsx("h1",{className:"text-2xl md:text-3xl pl-2 my-2 border-l-4  font-sans font-bold border-teal-400  ",children:"REPAIR"})})})}),t.jsx("div",{className:"container px-4 mx-auto",children:t.jsx("div",{className:"mt-4 mb-4 grid grid-cols-1 gap-x-6 gap-y-8",children:t.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-8 flex-1",children:[t.jsx(g,{onChange:r,name:"asc",required:!1,value:e.asc??"",label:"Select ASC",errorMessage:"",data:[{value:"",name:""},...p==null?void 0:p.map(s=>({value:s.id,name:s.name}))]}),t.jsx(i,{onChange:r,name:"repair_cost",span:"$",required:!1,value:e.repair_cost,label:"Repair Cost",type:"text",errorMessage:"Repair Cost is required"})]})})})]}),t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:" border-b border-gray-900/10 w-96",children:t.jsx("div",{className:"w-full flex justify-start px-4",children:t.jsx("div",{className:"flex items-start gap-x-3 mt-4 my-4 ",children:t.jsx("h1",{className:"text-2xl md:text-3xl pl-2 my-2 border-l-4  font-sans font-bold border-teal-400  ",children:"REFUND"})})})}),t.jsx("div",{className:"container px-4 mx-auto",children:t.jsx("div",{className:"mt-4 mb-4 grid grid-cols-1 gap-x-6 gap-y-8",children:t.jsxs("div",{className:"flex flex-col gap-6 ",children:[t.jsxs("div",{className:"flex gap-3 w-full",children:[t.jsx(i,{onChange:r,span:"$",name:"retailers_price",required:!1,value:(e==null?void 0:e.retailers_price)??" ",label:"Retailer's Price",type:"number",errorMessage:"Retailer's Price is required"}),t.jsx(i,{onChange:r,name:"discount",span:"$",required:!1,value:(e==null?void 0:e.discount)??" ",label:"Discount",type:"number",errorMessage:"Discount is required"}),t.jsx(i,{readOnly:!0,onChange:r,span:"$",name:"after_discount",required:!1,value:String(e.after_discount??"0"),label:"Price After Discount",type:"number",errorMessage:"Price After Discount is required"}),t.jsx(i,{onChange:r,name:"cost_refund",span:"$",required:!0,value:String(e.cost_refund??"0"),label:"Estimated Cost of Refund",type:"text",errorMessage:"Estimated Cost of Refund is required"})]}),t.jsxs("div",{className:"flex gap-3 w-full",children:[t.jsx(i,{onChange:r,name:"cheque_no",required:!1,value:(e==null?void 0:e.cheque_no)??" ",label:"Cheque No.",type:"text",errorMessage:"Cheque No. is required"}),t.jsx(i,{onChange:r,name:"cheque_amount",span:"$",required:!1,value:(e==null?void 0:e.cheque_amount)??" ",label:"Cheque Amount",type:"number",errorMessage:"Cheque Amount is required"}),t.jsx(i,{onChange:r,name:"mail_date",value:(e==null?void 0:e.mail_date)??" ",label:"Mail Date",type:"date"})]})]})})})]}),t.jsxs("div",{className:"flex ",children:[t.jsx("div",{className:" border-b border-gray-900/10 w-96",children:t.jsx("div",{className:"w-full flex justify-start px-4",children:t.jsx("div",{className:"flex items-start gap-x-3 mt-4 my-4 ",children:t.jsx("h1",{className:"text-2xl md:text-3xl pl-2 my-2 border-l-4  font-sans font-bold border-teal-400  ",children:"REPLACEMENT"})})})}),t.jsx("div",{className:"container px-4 mx-auto ",children:t.jsx("div",{className:"mt-4 mb-4 grid grid-cols-1 gap-x-6 gap-y-8",children:t.jsx("div",{className:"container  ",children:t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsx(i,{onChange:r,name:"cost_of_unit",span:"$",required:!1,value:(e==null?void 0:e.cost_of_unit)??"0",label:"Cost of Unit",type:"text",errorMessage:"Cost of Unit is required"}),t.jsx(i,{onChange:r,name:"cube_weight",required:!1,value:(e==null?void 0:e.cube_weight)??"0",label:"Cube Weight",type:"number",errorMessage:"Cube Weight is required"}),t.jsx("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Dimension"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(i,{onChange:r,name:"length",required:!1,value:(e==null?void 0:e.length)??"0",label:"Length",type:"number",errorMessage:"Length is required"}),t.jsx(i,{onChange:r,name:"width",required:!1,value:(e==null?void 0:e.width)??"0",label:"Width",type:"number",errorMessage:"Width is required"}),t.jsx(i,{onChange:r,name:"height",required:!1,value:(e==null?void 0:e.height)??"0",label:"Height",type:"number",errorMessage:"Height is required"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:P,type:"button",className:`w-96 flex items-center justify-center mr-12 py-2 ${y?"bg-blue-500":" bg-transparent  hover:bg-blue-50"}  text-blue-700 font-semibold px-4 border border-blue-500 rounded w-lg  shadow-sm shadow-black`,children:y?t.jsx(E,{}):"GET FEDEX RATES"}),t.jsx(i,{onChange:r,name:"shipping_cost",span:"$",required:!1,value:String(e==null?void 0:e.shipping_cost)??"0",label:"Shipping Cost",type:"number",errorMessage:"Shipping Cost is required"}),t.jsx(i,{onChange:r,name:"estimated_cost",span:"$",required:!1,value:String(e==null?void 0:e.estimated_cost)??"0",label:"Estimated Cost",type:"number",errorMessage:"Estimated Cost is required"})]}),t.jsx(g,{onChange:r,name:"instruction",required:!0,value:e.instruction??null,label:"Warranty Instruction",errorMessage:"",data:[{value:"",name:""},...e.country==="CA"?[{value:"CA Warehouse",name:"Return to (CA Warehouse)"}]:[],...e.country==="US"?[{value:"US Warehouse",name:"Return to (US Warehouse)"}]:[],{value:"Home",name:"Destroy in Home"},{value:"ASC",name:"Refer to ASC"},{value:"RMA Request",name:"RMA Request"}]}),t.jsx(g,{onChange:I,name:"email_template",value:"",label:"Email Templates",errorMessage:"",data:v.map(s=>({name:s.template_name,value:s.id}))}),e.instruction&&t.jsx(L,{label:"",name:"wysiwyg",value:(e==null?void 0:e.template_text)??null,onChange:r}),t.jsx("br",{})," ",t.jsx("br",{}),A.map(s=>t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx("input",{type:"checkbox",id:s.id,name:s.id,checked:!!C[s.id],onChange:F,className:"accent-blue-600 mt-1"}),t.jsx("label",{htmlFor:s.id,className:"font-medium",children:s.text})]},s.id)),t.jsxs("div",{className:"flex gap-5 my-12",children:[e.state!=="HI"&&e.state!=="PR"&&e.state!=="AK"&&t.jsxs("div",{class:"flex items-center",children:[t.jsx("input",{checked:e.ticket_type=="REPLACEMENT",id:"default-radio-2",onChange:s=>n({...e,ticket_type:s.target.value}),type:"radio",value:"REPLACEMENT",name:"ticket_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 "}),t.jsx("label",{htmlFor:"default-radio-2",class:"ms-2 text-xl font-medium text-gray-900",children:"Replacement"})]}),t.jsxs("div",{class:"flex items-center",children:[t.jsx("input",{checked:e.ticket_type=="REFUND",id:"default-radio-3",onChange:s=>n({...e,ticket_type:s.target.value}),type:"radio",value:"REFUND",name:"ticket_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 "}),t.jsx("label",{htmlFor:"default-radio-3",class:"ms-2 text-xl font-medium text-gray-900",children:"Refund"})]}),t.jsxs("div",{class:"flex items-center ",children:[t.jsx("input",{checked:e.ticket_type=="REPAIR",id:"default-radio-1",onChange:s=>n({...e,ticket_type:s.target.value}),type:"radio",value:"REPAIR",name:"ticket_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 "}),t.jsx("label",{htmlFor:"default-radio-1",class:"ms-2 text-xl font-medium text-gray-900",children:"Repair"})]}),t.jsxs("div",{class:"flex items-center ",children:[t.jsx("input",{checked:e.ticket_type=="RMA REQUEST",id:"default-radio-1",onChange:s=>n({...e,ticket_type:s.target.value}),type:"radio",value:"RMA REQUEST",name:"ticket_type",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 "}),t.jsx("label",{htmlFor:"default-radio-1",class:"ms-2 text-xl font-medium text-gray-900",children:"RMA Request"})]})]}),t.jsx("div",{className:"mt-10",children:t.jsx(i,{onChange:r,name:"replacement_notes",span:"",value:(e==null?void 0:e.replacement_notes)??"",label:"Resource Notes",type:"text"})}),t.jsx("button",{type:"submit",disabled:!N||h,onClick:q,className:`${!N||h?"bg-gray-600":"bg-blue-600 hover:bg-blue-700"} p-3   w-full font-bold text-white rounded-sm my-8`,children:h?t.jsx("div",{className:"p-1.5 flex items-center justify-center",children:t.jsx(E,{})}):"SUBMIT VALIDATION"})]})})})})]})]})]})}export{ge as default};
