import{r as n,j as t,s as C,y as u,z as h}from"./page-CHd1tz-i.js";import{S as w}from"./select-CCWYuA3x.js";import{T as g}from"./textarea-CSOm1_u-.js";import{u as c,a as b}from"./app-D8VJfAR1.js";import{u as k}from"./tickets-thunk-DCWQTKs5.js";import{r as d}from"./routing-BzgBYGmF.js";import{p as N}from"./tickets-service-CAgRt2C0.js";import"./index-BHPCq0XP.js";import"./activities-service-BaJCmKbj.js";import"./internals-service-B9kSbxh_.js";function D(){const[s,m]=n.useState({}),[y,r]=n.useState(!1),{ticket:o}=c(e=>e.tickets),{user:f}=c(e=>e.app),p=b();function i(e,a){m({...s,[a]:e})}const x=[{value:"Callback Sucessful - Fixed",name:"Callback Sucessful - Fixed"},{value:"Callback Sucessful - Not Fixed",name:"Callback Sucessful - Not Fixed"},{value:"No Answer - End Call",name:"No Answer - End Call"},{value:"No Answer - Left Voicemail",name:"No Answer - Left Voicemail"},{value:"Email sent",name:"Email sent"},{value:"Closed resolved - agent resolution",name:"Closed resolved - agent resolution"},{value:"Closed resolved - customer resolution",name:"Closed resolved - customer resolution"},{value:"Closed for warranty",name:"Closed for warranty"},{value:"Closed - parts issue",name:"Closed - parts issue"}];async function v(){if(confirm("Are you sure you want to close the ticket?")){r(!0);try{await C.dispatch(k(o.id,"CLOSED",s)),r(!1),u.visit(d("files"))}catch{r(!1)}}}async function l(e){try{const a=await N({...s,...o,user_id:f.id,where_to_move:e});p(h(a.result)),u.visit(d("files"))}catch{}}return t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsx(w,{onChange:i,name:"reason",value:(s==null?void 0:s.isHasEmail)??"",label:"Reason",errorMessage:"",data:x}),t.jsx(g,{required:!0,onChange:i,name:"notes",value:s.notes??" ",label:"Notes",type:"text",errorMessage:"Notes is required"}),t.jsxs("div",{className:"flex gap-5",children:[t.jsx("button",{onClick:()=>l("WARRANTY VALIDATION"),className:"p-3 bg-green-500 uppercase hover:bg-green-600 text-white rounded-md w-64 flex items-center justify-center",children:"Forwarded to Warranty"}),t.jsx("button",{onClick:()=>l("PARTS VALIDATION"),className:"p-3 bg-blue-500 uppercase hover:bg-blue-600 text-white rounded-md w-64 flex items-center justify-center",children:"Forwarded to Parts"}),t.jsx("button",{onClick:()=>v(),className:"p-3 bg-red-500 uppercase hover:bg-red-600 text-white rounded-md w-64 flex items-center justify-center",children:"CLOSE TICKET"})]})]})}export{D as default};
