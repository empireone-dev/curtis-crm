import{r as l,j as e,y as m}from"./page-3qddC-Ic.js";import{T as x}from"./textarea-D6aWmgKz.js";import{u as g,a as b}from"./app-By2jE93f.js";import{I as i}from"./input-D6nwgxKV.js";import{L as j}from"./loading-bhphzsc7.js";import{p as w,a as E}from"./replacement-service-CUrN_spP.js";import{h as _}from"./page-Bts9TZWZ.js";import{r as p}from"./routing-BzgBYGmF.js";import"./index-rStzQJdP.js";function M(){const{internals:o,ticket:t}=g(s=>s.tickets),{user:u}=g(s=>s.app),[h,f]=l.useState(!1),[y,c]=l.useState(!1);b();const[a,d]=l.useState({});l.useEffect(()=>{var s,n;d({...t,...t.receipt??{},...t.refund??{},notes:((s=t==null?void 0:t.replacement)==null?void 0:s.notes)??"",tracking:((n=t==null?void 0:t.replacement)==null?void 0:n.tracking)??"",ticket_id:t.id})},[t]);function r(s,n){d({...a,[n]:s})}async function N(){if(confirm("Are you sure you want to shipped the ticket?")){f(!0);try{const s=await w({...a,internals:o,account:u,status:"PARTS PROCESSED TICKET",activity_status:"PARTS REPLACEMENT SHIPPED"});console.log("result",s),m.visit(p("files"))}catch{m.visit(p("files")),f(!1)}}}async function v(){if(confirm("Are you sure you want to move in parts replacement?")){c(!0);try{await E({internals:o,...a,account:u,status:"REPLACEMENT PARTS",activity_status:"PARTS REPLACEMENT NOT SHIPPED"}),c(!1),m.visit(p("replacement_parts"))}catch{c(!0)}}}return e.jsxs("div",{className:"bg-white h-full px-3",children:[e.jsx("div",{className:"flex flex-col mt-6 ",children:e.jsx("div",{children:e.jsx("div",{className:"w-full py-2",children:e.jsx("div",{className:"overflow-hidden border border-gray-200  md:rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 ",children:[e.jsx("thead",{className:"",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 px-4 text-sm font-normal text-left ",children:e.jsx("button",{className:"flex items-center gap-x-3 focus:outline-none",children:e.jsx("span",{children:"Name"})})}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left ",children:"Part Number"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left ",children:"Location"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left ",children:"Cost"}),e.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left ",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 ",children:o.map((s,n)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4 text-sm font-medium whitespace-nowrap",children:e.jsx("div",{children:e.jsx("h2",{className:"font-medium text-gray-800",children:s.name})})}),e.jsx("td",{className:"px-4 py-4 text-sm font-medium whitespace-nowrap",children:e.jsx("div",{className:"inline  py-1 text-sm font-normal rounded-full",children:s.part_number})}),e.jsx("td",{className:"px-4 py-4 text-sm whitespace-nowrap",children:e.jsx("div",{children:e.jsx("h4",{className:"text-gray-700 ",children:s.location})})}),e.jsx("td",{className:"px-4 py-4 text-sm whitespace-nowrap",children:e.jsx("div",{children:e.jsx("h4",{className:"text-gray-700 ",children:s.cost})})}),e.jsx("td",{className:"px-4 py-4 text-sm whitespace-nowrap",children:e.jsx("div",{children:e.jsx("h4",{className:"text-gray-700 ",children:s.status})})})]},n))})]})})})})}),e.jsxs("div",{className:"mt-3 w-full",children:[e.jsx("h1",{className:"mt-2",children:"Parts Internal Remarks/Notes:"}),e.jsx(x,{disabled:!0,value:t.validation_notes,type:"text",className:"w-full"})]}),e.jsxs("div",{className:"mt-3 w-full",children:[e.jsx("h1",{children:"Updates from Curtis Notes:"}),e.jsx(x,{type:"text",disabled:!0,value:t.internal_notes,className:"w-full"})]}),e.jsxs("div",{className:"mt-5 my-4 w-full",children:[e.jsxs("div",{className:"my-2 flex flex-col",children:["Date: ",a.ship_date??"",e.jsx("input",{type:"date",className:"w-52",name:"ship_date",pattern:"\\d{1,2}/\\d{1,2}/\\d{4}",onChange:s=>d({...a,ship_date:_(s.target.value).format("L")})})]}),e.jsxs("div",{className:"px-4 py-2 sm:grid sm:grid-cols-2 sm:gap-4 sm:px-0",children:[e.jsx(i,{onChange:r,name:"unit",span:"",required:!0,value:String(a.unit??" "),label:"Unit",type:"text",errorMessage:"Unit is required"}),e.jsx(i,{onChange:r,name:"brand",span:"",required:!0,value:String(a.brand??" "),label:"Brand",type:"text",errorMessage:"Brand is required"})]}),e.jsxs("div",{className:"px-4 py-2 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[e.jsx(i,{onChange:r,name:"model",span:"",required:!0,value:String(a.item_number??" "),label:"model",type:"text",errorMessage:"model is required"}),e.jsx(i,{onChange:r,name:"serial_number",span:"",required:!0,value:String(a.serial_number??" "),label:"Serial",type:"text",errorMessage:"Serial is required"}),e.jsx(i,{onChange:r,name:"tracking",span:"",required:!0,value:String(a.tracking??" "),label:"Tracking",type:"text",errorMessage:"Tracking is required"})]}),e.jsx("div",{className:"px-4 py-2 sm:grid sm:grid-cols-1 sm:gap-4 sm:px-0",children:e.jsx(x,{required:!0,onChange:r,name:"notes",value:String(a.notes??" "),label:"Resource Notes:",type:"text",errorMessage:"notes is required"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{disabled:h,onClick:N,type:"button",className:"inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-green-700 rounded-lg hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 ",children:h?e.jsx(j,{}):"REPLACEMENT SHIPPED"}),e.jsx("button",{onClick:v,type:"button",className:"inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-red-700 rounded-lg hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 ",children:y?e.jsx(j,{}):"REPLACEMENT NOT SHIPPED"})]})]})]})}export{M as default};
