import{r as c,j as r}from"./page-DVVVTcK8.js";import{I as n}from"./input-ifg-qRyr.js";import{S as u}from"./select-DC-xkOzT.js";import{c as f}from"./country-BitBgIx2.js";import{L as N}from"./loading-ClGqpG3-.js";import{p as q}from"./product-registration-service-CudC87iD.js";import{U as C}from"./index-BQJjGQ6Z.js";import{B as S}from"./button-DkbuceU6.js";import{R as L}from"./UploadOutlined-BIavt0bc.js";import{s as d}from"./index-DRUAdLzS.js";import"./asyncToGenerator-c5WsSbRn.js";import"./index-NpFDK0km.js";import"./pickAttrs-9XeDcI0h.js";import"./motion-DFvW847i.js";import"./compact-item-C59iAMoG.js";import"./collapse-BbEVqHco.js";import"./useZIndex-6gEWSy-s.js";import"./fade-SZNI46jg.js";import"./useForceUpdate-DjufLz_S.js";import"./motion-4S5rSXvC.js";import"./DeleteOutlined-Do0HhEyd.js";import"./EyeOutlined-CV96Dwc3.js";import"./CheckCircleFilled-Bqw-tjCA.js";import"./CheckOutlined-2IiIubcb.js";import"./index-C-tIZ6UU.js";import"./index-BSrukfaA.js";import"./ContextIsolator-aTGfB0Im.js";import"./roundedArrow--fhCWMcx.js";import"./zoom-CE_WZ1p1.js";import"./useLocale-DWkRg3Vy.js";import"./render-BRlc8Cs-.js";import"./InfoCircleFilled-CPOxogNa.js";import"./KeyCode-DNlgD2sM.js";import"./useCSSVarCls-CiTpdV9Y.js";function oe(){const[e,o]=c.useState({}),[p,l]=c.useState(!1);function x(a){const t=(""+a).replace(/\D/g,"");let i=t;return t.length===11&&(i=t.slice(0,-1)),i.length===10?i.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"):a}function s(a,t){if(t=="phone")o({...e,phone:x(a)});else if(t=="issue"){if(a.name){const i=`["${a.name}"]`;o({...e,issue:i})}}else t=="country"?o({...e,country:a,state:""}):t=="serial"?a.length<=17&&o({...e,[t]:a}):o({...e,[t]:a})}function h(a){return/^A\d{16}$/.test(a)?a:"Invalid serial number format!"}const g=e.serial,m=h(g);async function j(a){l(!0),a.preventDefault();const t=new FormData;if(t.append("fname",e.fname),t.append("lname",e.lname),t.append("phone",e.phone),t.append("email",e.email),t.append("model",e.model),t.append("serial",e.serial),t.append("country",e.country),t.append("state",e.state),t.append("city",e.city),t.append("zipcode",e.zipcode),t.append("address1",e.address1),t.append("address2",e.address2),t.append("fname",e.fname),e.fileList&&e.fileList.length!==0)if(e.serial.length==17)if(m!=="Invalid serial number format!"){e.fileList.forEach(i=>{i.name!=="uploaded"&&i.status==="done"&&t.append("files[]",i.originFileObj)});try{const i=await q(t);console.log("res",i),i.result=="exist"?(d.warning("Serial number already existed!"),l(!1)):(d.success("Product Registration Successfully!"),o({}),l(!1))}catch{l(!1)}}else d.error("Invalid serial number format!"),l(!1);else d.error('Serial # must have 16 digits and start with the capital letter "A"');else d.error("Please attach your receipt."),l(!1)}const b=a=>f.find(t=>t.value===a),{regions:y}=b((e==null?void 0:e.country)??"CA"),v={name:"file",method:"GET",action:"https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload",multiple:!0,headers:{authorization:"authorization-text"},onChange(a){o({...e,fileList:a.fileList})}};return console.log("form?.fileList",e),r.jsx("div",{children:r.jsxs("form",{onSubmit:j,className:" w-full px-8 pt-6 pb-8 mb-4 flex flex-col gap-3 ",children:[r.jsx("div",{className:"flex items-center justify-center font-black text-3xl",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("img",{src:"/images/logo.png"}),"Product Registration Form"]})}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsx(n,{required:!0,onChange:s,name:"fname",value:e.fname,label:"First Name",type:"text",errorMessage:"First Name is required"}),r.jsx(n,{required:!0,onChange:s,name:"lname",value:e.lname,label:"Last Name",type:"text",errorMessage:"Last Name is required"})]}),r.jsx(n,{required:!0,onChange:s,name:"phone",value:e.phone,label:"Phone",type:"phone",errorMessage:"Phone is required"}),r.jsx(n,{required:!0,onChange:s,name:"email",value:e.email,label:"Email",type:"email",errorMessage:"Email is required"}),r.jsx(n,{required:!0,onChange:s,name:"model",value:e.model,label:"Model",type:"text",errorMessage:"Model is required"}),(e==null?void 0:e.serial)&&m=="Invalid serial number format!"&&r.jsx("div",{className:"text-red-500",children:m}),m!=="Invalid serial number format!"&&r.jsx("div",{className:"text-green-500",children:"Correct Format!"}),r.jsxs("div",{className:"mt-2",children:["Serial # (starts with capital letter A and 16 digits number)",r.jsx(n,{required:!0,onChange:s,name:"serial",value:e.serial,label:"",type:"text",errorMessage:"Serial is required"})]}),r.jsx("div",{className:"mt-2",children:r.jsx(u,{onChange:s,name:"country",required:!0,value:e==null?void 0:e.country,label:"Country",data:f.map(a=>({name:a.name,value:a.value}))})}),r.jsx(u,{onChange:s,name:"state",required:!0,value:e==null?void 0:e.state,label:"State / Province / Region",data:y}),r.jsx(n,{required:!0,onChange:s,name:"city",value:e.city,label:"City",type:"text",errorMessage:"City is required"}),r.jsx(n,{required:!0,onChange:s,name:"zipcode",value:e.zipcode,label:"Zip / Postal Code",type:"text",errorMessage:"Zipcode is required"}),r.jsx(n,{onChange:s,name:"address1",required:!0,value:e==null?void 0:e.address1,label:"Address 1",type:"text"}),r.jsx(n,{onChange:s,name:"address2",required:!1,value:e==null?void 0:e.address2,label:"Address 2",type:"text"}),"Entire Picture of the Receipt that shows Date of Purchase, Name of Store,",r.jsx("br",{}),"Unit Description, Unit Price, Order Summary with Total Breakdown:",r.jsx("br",{}),r.jsx("div",{className:"text-red-500",children:"NOTE: It must be clear and readable. Not valid if required information is incomplete."}),r.jsx("div",{className:"text-red-500",children:"Photos and Receipt must in be in the following file formats: .jpg, .jpeg, .png, .pdf"}),r.jsx(C,{fileList:(e==null?void 0:e.fileList)??[],listType:"picture",...v,accept:".jpg,.jpeg,.png,.pdf",children:r.jsx(S,{icon:r.jsx(L,{}),children:"Click to upload receipt/bill of sale."})}),r.jsx("button",{disabled:p,className:"p-3 flex w-full items-center justify-center bg-blue-500 text-white rounded-sm hover:to-blue-600",children:p?r.jsx("div",{className:"py-1.5",children:r.jsx(N,{})}):"REGISTER"})]})]})})}export{oe as default};
