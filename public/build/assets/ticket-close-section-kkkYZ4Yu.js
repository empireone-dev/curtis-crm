import{r as c,j as t,y as u}from"./page-Z5sU5TGy.js";import{L as g}from"./loading-7kwc7MQc.js";import{M as b}from"./modal-Bv1o8Niq.js";import{u as m}from"./app-D9fXSoX4.js";import{r as k}from"./reason-BRIeM0DO.js";import{S as v}from"./select-B0KArkDs.js";import{a as y}from"./tickets-service-ymT7hDxH.js";import"./transition-_9IBQIr1.js";import"./dialog-C04vxtnn.js";import"./index-DsXjZlsd.js";function E({data:s}){const[d,i]=c.useState(!1),[f,o]=c.useState(!1),[n,p]=c.useState(""),{user:a}=m(e=>e.app);m(e=>e.tickets),console.log("user",a);async function l(e){if(e.preventDefault(),o(!0),n)try{const r=await y({...s,user:a,reason:n});o(!1),a.role_id==1?u.visit("/administrator/tickets?search="+(r==null?void 0:r.ticket_id)):u.visit("/agent/tickets?search="+(r==null?void 0:r.ticket_id))}catch{o(!1)}else o(!1)}function x(e){p(e)}async function h(e){e.preventDefault(),s.phone==null||s.phone==""||s.phone==null||s.remarks==null||s.remarks==""||s.remarks==null?alert("Phone Number & Remarks must be required!"):i(!0)}return t.jsxs("div",{children:[t.jsx("button",{type:"button",onClick:e=>h(e),className:"p-3 w-36 bg-red-500 text-white rounded-sm hover:to-red-600",children:"CLOSE"}),t.jsx(b,{open:d,setOpen:i,title:"Close Ticket",children:t.jsxs("form",{onSubmit:l,children:[t.jsxs("div",{className:"text-lg",children:["Ticket ID: ",s.ticket_id]}),"Are you sure you want to close the ticket?",t.jsx("div",{className:"my-4",children:t.jsx(v,{required:!0,onChange:x,name:"reason",value:n,label:"Reason to Close",errorMessage:"Reason is required",data:k.map(e=>({name:e.name,value:e.value}))})}),t.jsxs("div",{className:"flex border-gray-200 rounded-b  mt-3.5",children:[t.jsx("button",{onClick:l,type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center  ",children:f?t.jsx("div",{className:"py-1.5",children:t.jsx(g,{})}):"Yes, Proceed"}),t.jsx("button",{type:"button",className:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100     ",onClick:()=>i(!1),children:"Cancel"})]})]})})]})}export{E as default};
