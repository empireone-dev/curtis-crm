import{r as i,j as s,y as h}from"./page-3qddC-Ic.js";import{L as b}from"./loading-bhphzsc7.js";import{M as g}from"./modal-DD4-7G7y.js";import{u as a}from"./app-BzAqZsCf.js";import{r as v}from"./reason-Dx2dq_gx.js";import{S as y}from"./select-B1gdv0xu.js";import{j as k}from"./tickets-service-BYEPOVyf.js";import{r as j}from"./routing-BzgBYGmF.js";import"./transition-zJtuF8mh.js";import"./dialog-BXsXcTqv.js";import"./index-rStzQJdP.js";function I({data:t}){const[c,o]=i.useState(!1),[u,r]=i.useState(!1),[n,m]=i.useState(""),{user:f}=a(e=>e.app),{ticket:d}=a(e=>e.tickets);async function l(e){if(e.preventDefault(),r(!0),n)try{await k(t,n,{...d,...f}),r(!1),h.visit(j("details"))}catch{r(!1)}else r(!1)}function p(e){m(e)}function x(e){e.preventDefault(),(window.location.pathname.split("/")[5]??"")=="details"?o(!0):t.fname==null||t.fname==""||t.fname==null||t.phone==null||t.phone==""||t.phone==null||t.remarks==null||t.remarks==""||t.remarks==null?alert("Name, Phone Number & Remarks must be required!"):o(!0)}return s.jsxs("div",{children:[s.jsx("button",{type:"button",onClick:e=>x(e),className:"p-3 w-36 bg-red-500 text-white rounded-sm hover:to-red-600",children:"CLOSE"}),s.jsx(g,{open:c,setOpen:o,title:"Close Ticket",children:s.jsxs("form",{onSubmit:l,children:[s.jsxs("div",{className:"text-lg",children:["Ticket ID: ",t.ticket_id]}),"Are you sure you want to close the ticket?",s.jsx("div",{className:"my-4",children:s.jsx(y,{required:!0,onChange:p,name:"reason",value:n,label:"Reason to Close",errorMessage:"Reason is required",data:v.map(e=>({name:e.name,value:e.value}))})}),s.jsxs("div",{className:"flex border-gray-200 rounded-b  mt-3.5",children:[s.jsx("button",{onClick:l,type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center  ",children:u?s.jsx("div",{className:"py-1.5",children:s.jsx(b,{})}):"Yes, Proceed"}),s.jsx("button",{type:"button",className:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100     ",onClick:()=>o(!1),children:"Cancel"})]})]})})]})}export{I as default};
