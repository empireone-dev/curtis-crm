import{r,q as m,j as e,s as u,x as h,z as x}from"./page-DdRUgAPm.js";import{L as g}from"./loading-cC9aGlE7.js";import{g as j}from"./customer-tickets-thunk-BWCQwAzC.js";import{j as _,g as b}from"./tickets-service-BITOlmJF.js";import{a as w}from"./app-QxpcjIeC.js";import"./files-service-CzfXzxsy.js";import"./index-cYOT7JlB.js";function D({data:t}){const[n,s]=r.useState(!1),[a,c]=r.useState(!1),o=w(),{url:l}=m();r.useEffect(()=>{a&&setTimeout(()=>{c(!1)},[2e3])},[a]);async function f(E){s(!0);try{await _(t),s(!1),c(!0);const i=l.split("/")[l.split("/").length-2].split("#")[0],p=await u.dispatch(j(i)),d=await b(i);o(h(d)),o(x(p))}catch{s(!1)}}return e.jsx("div",{children:e.jsx("button",{onClick:f,className:`${t.isEscalated?"bg-green-800 p-2 text-white  hover:bg-green-900":" bg-red-800 p-2 text-white  hover:bg-red-900"} flex items-center justify-center w-64`,children:n?e.jsx("div",{className:"py-2",children:e.jsx(g,{})}):e.jsx("div",{className:"p-1 w-full flex items-center justify-center",children:a?e.jsx("div",{className:"text-white uppercase text-xs py-1",children:"The casefile has been escalated."}):"ESCALATE"+(t.isEscalated?"D":"")})})})}export{D as default};
