import{r as o,q as T,j as s,s as g}from"./store-Lwl4u78n.js";import{L as E}from"./loading-CUVpPXxX.js";import{a as I,d as S}from"./customer-tickets-thunk-Dezr9P1x.js";import{u as w}from"./app-BP6p8X6f.js";import{I as O}from"./image-view-DCx8qDkS.js";import"./tickets-service-DhOb6fsC.js";import"./customer-tickets-slice-DuTkIpMH.js";import"./files-service-BLpsHSjt.js";import"./TrashIcon-CXB_VP-Z.js";import"./transition-D0v8RKdv.js";import"./dialog-CXmuIcwU.js";const U=()=>{var x;const[i,n]=o.useState([]),{filesData:l}=w(e=>e.customer_tickets),a=document.getElementById("overlay"),v=o.useRef(null),[c,d]=o.useState(!1),[j,u]=o.useState(!1),{url:h}=T(),{user:b}=w(e=>e.app),f=e=>{e.type.match("image.*");const t=URL.createObjectURL(e);n(r=>[...r,{objectURL:t,file:e}]),a.classList.remove("draggedover")},y=e=>{n(t=>t.filter(r=>r.objectURL!==e))},m=e=>e.dataTransfer.types.indexOf("Files")>-1,N=e=>{e.preventDefault();for(const t of e.dataTransfer.files)f(t)},k=e=>{e.preventDefault(),m(e)&&a.classList.add("draggedover")},_=e=>{e.preventDefault(),a.classList.remove("draggedover")},z=e=>{m(e)&&e.preventDefault()},C=()=>{document.getElementById("hidden-input2").click()},F=e=>{for(const t of e.target.files)f(t)};function p(){n([])}async function L(){d(!0);const e=new FormData;e.append("ticket_id",h.split("/")[3]),e.append("user_id",b.id),e.append("type","front_of_the_unit"),i.forEach(t=>{e.append("files[]",t.file)}),await g.dispatch(I(e,h.split("/")[3])),d(!1),n([])}async function D(e,t){u(!0),await g.dispatch(S(e,t)),u(!1),p()}return s.jsxs("article",{"aria-label":"File Upload Modal",className:"relative flex flex-col container  w-full h-1/2",onDrop:N,onDragOver:z,onDragLeave:_,onDragEnter:k,children:[s.jsxs("section",{className:"h-full w-full flex flex-col",children:[s.jsx("div",{className:"text-xl font-black",children:"A clear picture of the front of the unit"}),s.jsx("div",{className:"text-gray-400",children:"for TVs, a full frontal picture while the tv is turned on."}),s.jsx("h1",{className:" pb-3 font-semibold sm:text-lg text-gray-900",children:"To Upload"}),s.jsxs("ul",{id:"gallery",className:"flex flex-1 flex-wrap -m-1",ref:v,children:[s.jsx(O,{isLoading:j,deleteFileImage:(e,t)=>D(e,t),files:(l==null?void 0:l.front_of_the_unit)??[]}),i.map(({objectURL:e,file:t})=>s.jsx("li",{className:"block p-1 w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/5 h-36",id:e,children:s.jsxs("article",{className:"group w-full h-full rounded-md focus:outline-none focus:shadow-outline relative bg-gray-100 cursor-pointer text-transparent hover:text-white shadow-sm",children:[s.jsx("img",{className:"img-preview w-full h-full sticky object-cover rounded-md bg-fixed",alt:"upload preview",src:e}),s.jsxs("section",{className:"flex hover:bg-gray-300 flex-col rounded-md text-xs break-words w-full h-full z-20 absolute top-0 py-2 px-3",children:[s.jsx("h1",{className:"flex-1 ",children:t.name}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"p-1",children:s.jsx("i",{})}),s.jsx("p",{className:"p-1 size text-xs",children:t.size>1024?t.size>1048576?Math.round(t.size/1048576)+"mb":Math.round(t.size/1024)+"kb":t.size+"b"}),s.jsx("button",{className:"delete ml-auto focus:outline-none hover:bg-gray-300 p-1 rounded-md",onClick:()=>y(e),children:s.jsx("svg",{className:"pointer-events-none fill-current w-4 h-4 ml-auto",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:s.jsx("path",{className:"pointer-events-none",d:"M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z"})})})]})]})]})},e)),s.jsx("li",{className:"block p-1 w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/5 h-24",children:s.jsx("article",{className:"group w-full h-full rounded-md focus:outline-none focus:shadow-outline relative bg-gray-100 cursor-pointer text-transparent hover:text-white shadow-sm",children:s.jsxs("header",{className:`${((x=l==null?void 0:l.bill_of_sale)==null?void 0:x.length)==0?"border-gray-400":"border-red-600"} border-dashed border-2  flex flex-col justify-center items-center`,children:[s.jsx("input",{id:"hidden-input2",type:"file",multiple:!0,className:"hidden",onChange:F}),s.jsx("button",{id:"button",className:"mt-2 rounded-sm px-3 py-1  focus:shadow-outline focus:outline-none",onClick:C,children:s.jsxs("div",{id:"overlay",className:"w-full h-full  top-0 left-0 pointer-events-none z-50 flex flex-col items-center justify-center rounded-md",children:[s.jsx("i",{children:s.jsx("svg",{className:"fill-current w-12 h-12 mb-3 text-blue-700",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M19.479 10.092c-.212-3.951-3.473-7.092-7.479-7.092-4.005 0-7.267 3.141-7.479 7.092-2.57.463-4.521 2.706-4.521 5.408 0 3.037 2.463 5.5 5.5 5.5h13c3.037 0 5.5-2.463 5.5-5.5 0-2.702-1.951-4.945-4.521-5.408zm-7.479-1.092l4 4h-3v4h-2v-4h-3l4-4z"})})}),s.jsxs("p",{className:"text-lg text-blue-700",children:[s.jsx("span",{children:"Drag and drop your"}),"Â ",s.jsx("span",{children:"files anywhere or"})]})]})})]})})})]})]}),s.jsxs("footer",{className:"flex justify-end px-8 pt-12",children:[s.jsx("button",{disabled:c,id:"submit",className:"rounded-sm px-3 py-1 bg-blue-700 hover:bg-blue-500 text-white focus:shadow-outline focus:outline-none",onClick:L,children:c?s.jsx(E,{}):" Upload now"}),s.jsx("button",{id:"cancel",className:"ml-3 rounded-sm px-3 py-1 hover:bg-gray-300 focus:shadow-outline focus:outline-none",onClick:p,children:"Cancel"})]})]})},P=U;export{P as default};
