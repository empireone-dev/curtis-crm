import{r as u,j as t,z as f,y as g}from"./page-DYpLzGDn.js";import{I as a}from"./input-DoFBkTv9.js";import{T as x}from"./textarea-7jkiOPHo.js";import{u as d,a as q}from"./app-CQJA5MBt.js";import{p as _}from"./refund-service-CksbL9mh.js";import{L as C}from"./loading-CR1FM5vD.js";import{r as j}from"./routing-BzgBYGmF.js";import{h as y}from"./page-CZJkV9Z0.js";import"./index-DaPaTlHv.js";function P(){const[e,i]=u.useState({}),{ticket:n}=d(s=>s.tickets),{user:l}=d(s=>s.app),p=q(),[m,o]=u.useState(!1);u.useEffect(()=>{i({...n.decision_making??{},...n.refund??{}})},[n]);function r(s,c){c=="estimated_cost"?i({...e,estimated_cost:s.replace(/[^0-9.]/g,"")}):i({...e,[c]:s})}async function h(){if(confirm("Are you sure you want to shipped the ticket?")){o(!0);try{const s=await _({...e,ticket_id:n.id,account:l,status:"PROCESSED TICKET"});p(f(s.status)),o(!1),g.visit(j("files"))}catch{o(!1)}}}return t.jsxs("div",{className:"flex flex-col gap-8 my-12",children:[t.jsxs("div",{className:"flex flex-col",children:["Date: ",e.ship_date??"",t.jsx("input",{type:"date",className:"w-52",name:"ship_date",pattern:"\\d{1,2}/\\d{1,2}/\\d{4}",onChange:s=>i({...e,ship_date:y(s.target.value).format("L")})})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsx(a,{onChange:r,name:"retailers_price",span:"$",required:!0,value:String(e.retailers_price)??" ",label:"Retailer's Price",type:"number",errorMessage:"Retailers Price is required"}),t.jsx(a,{onChange:r,name:"discount",span:"$",required:!0,value:String(e.discount)??" ",label:"discount",type:"text",errorMessage:"Discount is required"}),t.jsx(a,{onChange:r,name:"after_discount",span:"$",required:!0,value:String(parseFloat(e==null?void 0:e.retailers_price)-parseFloat((e==null?void 0:e.discount)??"0")),label:"Price After Discount",type:"text",errorMessage:"Price After Discount is required"}),t.jsx(a,{onChange:r,name:"cost_refund",span:"$",required:!0,value:String(e.cost_refund??"0"),label:"Estimated Cost of Refund",type:"text",errorMessage:"Estimated Cost of Refund is required"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(a,{onChange:r,name:"cheque_no",required:!0,value:e.cheque_no??"0",label:"Cheque Number",type:"text",errorMessage:"Cheque Number is required"}),t.jsx(a,{onChange:r,name:"cheque_amount",span:"$",required:!0,value:e.cheque_amount??"0",label:"Cheque Amount",type:"text",errorMessage:"Cheque Amount is required"}),t.jsx("div",{className:" text-red-500",children:"Resource Notes: Refund is cheaper than replacement."})]}),t.jsx(x,{required:!0,onChange:r,name:"notes",value:e.notes??" ",label:"Resource Notes:",type:"text",errorMessage:"notes is required"}),t.jsx("button",{onClick:h,className:" rounded-sm bg-green-600 text-white text-bold hover:bg-green-700 flex items-center justify-center p-2.5",children:m?t.jsx(C,{}):"CHECKQUE SHIPPED"})]})}export{P as default};
