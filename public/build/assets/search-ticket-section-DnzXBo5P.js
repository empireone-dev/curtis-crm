import{r as a,j as e,Z as i,y as u}from"./page-DdRUgAPm.js";import{I as m}from"./input-DEU2Nfgm.js";import{M as N}from"./modal-CqQKV-tv.js";import{C as v}from"./tickets-service-BITOlmJF.js";import{a as y,u as k}from"./app-Dkf5XEGX.js";import"./transition-FGm23vF7.js";import"./dialog-K3CQfzyK.js";import"./index-cYOT7JlB.js";function _({title:r,titleId:n,...s},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}const C=a.forwardRef(_);function S({title:r,titleId:n,...s},d){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{d:"M8.25 10.875a2.625 2.625 0 1 1 5.25 0 2.625 2.625 0 0 1-5.25 0Z"}),a.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.125 4.5a4.125 4.125 0 1 0 2.338 7.524l2.007 2.006a.75.75 0 1 0 1.06-1.06l-2.006-2.007a4.125 4.125 0 0 0-3.399-6.463Z",clipRule:"evenodd"}))}const E=a.forwardRef(S);function O(){const[r,n]=a.useState(!1),s=y(),[d,h]=a.useState([]),{user:o,search:l}=k(t=>t.app),[p,f]=a.useState(null);async function b(t){t.preventDefault();const c=await v(l);h(c),f(Math.random())}function j(t){o.role_id==1?u.visit("/administrator/tickets?search="+t):o.role_id==3?u.visit("/warehouse/tickets?search="+t):o.role_id==6?u.visit("/curtis/tickets?search="+t):u.visit("/agent/tickets?search="+t)}function g(t){o.role_id==5?window.location.href="/agent/tickets/create":o.role_id==1&&(window.location.href="/administrator/tickets/create")}function w(t){const c=(""+t).replace(/\D/g,"");let x=c;return c.length===11&&(x=c.slice(0,-1)),x.length===10?x.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"):t}return e.jsxs("div",{children:[e.jsx("div",{children:e.jsxs("button",{onClick:()=>n(!0),className:"text-blue-400 flex items-center justify-center transition-colors duration-200 rounded-full bg-blue-50 hover:text-blue-600 hover:bg-blue-100 focus:outline-none focus:bg-blue-100 focus:ring-blue-800",children:[e.jsx(E,{className:"h-12 flex items-center justify-center"}),"Â "]})}),e.jsxs(N,{width:"max-w-7xl",position:"items-start",setOpen:n,open:r,title:"Lookup Ticket",children:[e.jsxs("form",{onSubmit:b,className:"flex flex-col gap-4 w-full",children:[e.jsx("div",{className:"flex w-full gap-5",children:e.jsx(m,{type:"text",onChange:t=>s(i({...l,ticket_id:t})),label:"Case File #",value:(l==null?void 0:l.ticket_id)??"",name:"ticket_id"})}),e.jsxs("div",{className:"flex w-full gap-5",children:[e.jsx(m,{type:"phone",onChange:t=>s(i({...l,phone:w(t)})),label:"Phone (Primary or Secondary)",value:(l==null?void 0:l.phone)??"",name:"phone"}),e.jsx(m,{type:"text",onChange:t=>s(i({...l,email:t})),label:"Email",value:(l==null?void 0:l.email)??"",name:"email"})]}),e.jsxs("div",{className:"flex w-full gap-5",children:[e.jsx(m,{type:"text",onChange:t=>s(i({...l,serial_number:t})),label:"Serial #",value:(l==null?void 0:l.serial_number)??"",name:"serial_number"}),e.jsx(m,{type:"text",onChange:t=>s(i({...l,item_number:t})),label:"Model",value:(l==null?void 0:l.item_number)??"",name:"item_number"})]}),e.jsxs("div",{className:"flex w-full gap-5",children:[e.jsx(m,{type:"text",onChange:t=>s(i({...l,fname:t})),label:"First Name",value:(l==null?void 0:l.fname)??"",name:"fname"}),e.jsx(m,{type:"text",onChange:t=>s(i({...l,lname:t})),label:"Last Name",value:(l==null?void 0:l.lname)??"",name:"lname"})]}),e.jsxs("div",{className:"bg-gray-50 sm:flex sm:flex-row-reverse ",children:[e.jsx("button",{type:"Submit",className:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 sm:ml-3 sm:w-auto",children:"Search"}),e.jsx("button",{onClick:()=>s(i({})),type:"button",className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",children:"Reset"}),e.jsx("button",{type:"button",onClick:()=>setIsModalOpen(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Cancel"})]})]}),e.jsx("div",{className:"py-4 flex justify-center",children:e.jsx("table",{className:"w-full text-md mb-4",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-3 px-5",children:"Ticket ID"}),o.role_id!=6&&e.jsx("th",{className:"text-left p-3 px-5",children:"Assigned To"}),e.jsx("th",{className:"text-left p-3 px-5",children:"Email"}),e.jsx("th",{className:"text-left p-3 px-5",children:"Phone"}),e.jsx("th",{className:"text-left p-3 px-5",children:"Secondary Phone"}),e.jsx("th",{className:"text-left p-3 px-5",children:"Fullname"}),e.jsx("th",{className:"text-left p-3 px-5",children:"Resolution"}),e.jsx("th",{className:"text-left p-3 px-5",children:"Issue"}),e.jsx("th",{className:"text-left p-3 px-5",children:"Action"})]}),d.length==0&&l!==""&&p!==null&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-red-500 font-black",children:"No Record Found."}),e.jsx("div",{className:"my-8",children:e.jsx("div",{className:" flex items-start justify-start",children:e.jsx("button",{onClick:()=>g(),className:"p-3 bg-blue-500 text-white hover:bg-blue-600 rounded-md",children:"CREATE TICKET"})})})]}),d.map((t,c)=>{var x;return console.log("ressss",t),e.jsxs("tr",{className:"border-b hover:bg-blue-100 ",children:[e.jsx("td",{className:"p-3 px-5",children:t.ticket_id}),o.role_id!=6&&e.jsx("td",{className:"p-3 px-5",children:(x=t==null?void 0:t.user)==null?void 0:x.name}),e.jsx("td",{className:"p-3 px-5",children:t.email}),e.jsx("td",{className:"p-3 px-5",children:t.phone}),e.jsx("td",{className:"p-3 px-5",children:t.phone2}),e.jsxs("td",{className:"p-3 px-5",children:[t.fname," ",t.lname]}),e.jsx("td",{className:"p-3 px-5",children:t.call_type}),e.jsx("td",{className:"p-3 px-5",children:t.issue}),e.jsx("td",{className:"p-3 px-5",children:e.jsx("button",{onClick:()=>j(t.id),children:e.jsx(C,{className:"h-6 text-blue-600"})})})]},c)})]})})})]})]})}export{O as default};
