import{r as n,q as D,j as e,s as x}from"./store-CG9dSQPZ.js";import{u as S,d as F}from"./customer-tickets-thunk-C76ShFe8.js";import{L as I}from"./loading-DwJ_eoJg.js";import{I as E}from"./image-view-P-P4eKiv.js";import{u as g,a as B}from"./app-XQnNBZQI.js";import"./tickets-service-DJL4N6io.js";import"./files-service-Cggf-SuI.js";import"./TrashIcon-BiIHmJES.js";import"./transition-Tlb-Np9s.js";import"./dialog-LVXqgeYH.js";const O=()=>{const[d,a]=n.useState([]),{filesData:t}=g(s=>s.customer_tickets),o=document.getElementById("overlay");n.useRef(null),B();const{url:c}=D(),[w,u]=n.useState(!1),[h,m]=n.useState(!1),{user:j}=g(s=>s.app),p=s=>{s.type.match("image.*");const l=URL.createObjectURL(s);a(i=>[...i,{objectURL:l,file:s}]),o.classList.remove("draggedover")},v=s=>{a(l=>l.filter(i=>i.objectURL!==s))},f=s=>s.dataTransfer.types.indexOf("Files")>-1,b=s=>{s.preventDefault();for(const l of s.dataTransfer.files)p(l)},y=s=>{s.preventDefault(),f(s)&&o.classList.add("draggedover")},N=s=>{s.preventDefault(),o.classList.remove("draggedover")},k=s=>{f(s)&&s.preventDefault()},_=()=>{document.getElementById("hidden-input1").click()},z=s=>{for(const l of s.target.files)p(l)};async function C(){m(!0);const s=new FormData;s.append("ticket_id",c.split("/")[3]),s.append("user_id",j.id),s.append("type","bill_of_sale"),d.forEach(l=>{s.append("files[]",l.file)}),await x.dispatch(S(s,c.split("/")[3])),m(!1),a([])}function r(){a([])}async function L(s,l){u(!0),await x.dispatch(F(s,l)),u(!1),r()}return e.jsxs("article",{"aria-label":"File Upload Modal",className:"relative flex flex-col container  w-full h-1/2",onDrop:b,onDragOver:k,onDragLeave:N,onDragEnter:y,children:[e.jsxs("section",{className:"h-full w-full flex flex-col",children:[e.jsx("div",{className:"text-xl font-black",children:"A clear and readable picture of the bill of sale"}),e.jsxs("div",{className:"text-gray-400",children:["Please note the bill of sale must show the following:",e.jsxs("ul",{className:"max-w-md space-y-1 text-gray-400 list-disc list-inside mt-2",children:[e.jsx("li",{children:"Store Name and Address *except if purchased online"}),e.jsx("li",{children:"Date of purchase"}),e.jsx("li",{children:"Item description"}),e.jsx("li",{children:"Unit Price"}),e.jsx("li",{children:"Total amount paid"})]})]}),e.jsx("div",{className:"text-md font-gray-500",children:"If you do not have the bill of sale, you may try contacting the dealer’s customer care department for added support."}),e.jsx("h1",{className:" pb-3 font-semibold sm:text-lg text-gray-900",children:"To Upload"}),e.jsxs("ul",{id:"gallery",className:"flex flex-1 flex-wrap -m-1",children:[e.jsx(E,{isLoading:w,deleteFileImage:(s,l)=>L(s,l),files:(t==null?void 0:t.bill_of_sale)??[]}),d.map(({objectURL:s,file:l})=>e.jsx("li",{className:"block p-1 w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/5 h-36",id:s,children:e.jsxs("article",{className:"group w-full h-full rounded-md focus:outline-none focus:shadow-outline relative bg-gray-100 cursor-pointer text-transparent hover:text-white shadow-sm",children:[e.jsx("img",{className:"img-preview w-full h-full sticky object-cover rounded-md bg-fixed",alt:"upload preview",src:s}),e.jsxs("section",{className:"flex hover:bg-gray-300 flex-col rounded-md text-xs break-words w-full h-full z-20 absolute top-0 py-2 px-3",children:[e.jsx("h1",{className:"flex-1 ",children:l.name}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"p-1",children:e.jsx("i",{})}),e.jsx("p",{className:"p-1 size text-xs",children:l.size>1024?l.size>1048576?Math.round(l.size/1048576)+"mb":Math.round(l.size/1024)+"kb":l.size+"b"}),e.jsx("button",{className:"delete ml-auto focus:outline-none hover:bg-gray-300 p-1 rounded-md",onClick:()=>v(s),children:e.jsx("svg",{className:"pointer-events-none fill-current w-4 h-4 ml-auto",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:e.jsx("path",{className:"pointer-events-none",d:"M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z"})})})]})]})]})},s)),e.jsx("li",{className:"block p-1 w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/5 h-24",children:e.jsx("article",{className:"group w-full h-full rounded-md focus:outline-none focus:shadow-outline relative bg-gray-100 cursor-pointer text-transparent hover:text-white shadow-sm",children:e.jsxs("header",{className:`${t!=null&&t.bill_of_sale?"border-gray-400":"border-red-600"} border-dashed border-2  flex flex-col justify-center items-center`,children:[e.jsx("input",{id:"hidden-input1",type:"file",multiple:!0,className:"hidden",onChange:z}),e.jsx("button",{id:"button",className:"mt-2 rounded-sm px-3 py-1  focus:shadow-outline focus:outline-none",onClick:_,children:e.jsxs("div",{id:"overlay",className:"w-full h-full  top-0 left-0 pointer-events-none z-50 flex flex-col items-center justify-center rounded-md",children:[e.jsx("i",{children:e.jsx("svg",{className:"fill-current w-12 h-12 mb-3 text-blue-700",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19.479 10.092c-.212-3.951-3.473-7.092-7.479-7.092-4.005 0-7.267 3.141-7.479 7.092-2.57.463-4.521 2.706-4.521 5.408 0 3.037 2.463 5.5 5.5 5.5h13c3.037 0 5.5-2.463 5.5-5.5 0-2.702-1.951-4.945-4.521-5.408zm-7.479-1.092l4 4h-3v4h-2v-4h-3l4-4z"})})}),e.jsxs("p",{className:"text-lg text-blue-700",children:[e.jsx("span",{children:"Drag and drop your"})," ",e.jsx("span",{children:"files anywhere or"})]})]})})]})})})]})]}),e.jsxs("footer",{className:"flex justify-end px-8 pt-12",children:[e.jsx("button",{disabled:h,id:"submit",className:"rounded-sm px-3 py-1 bg-blue-700 hover:bg-blue-500 text-white focus:shadow-outline focus:outline-none",onClick:C,children:h?e.jsx(I,{}):" Upload now"}),e.jsx("button",{id:"cancel",className:"ml-3 rounded-sm px-3 py-1 hover:bg-gray-300 focus:shadow-outline focus:outline-none",onClick:r,children:"Cancel"})]})]})},G=O;export{G as default};
